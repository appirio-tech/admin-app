<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-md-10">
            <h2>Forums</h2>
        </div>
        <div class="col-md-2">
            <a class="btn btn-primary pull-right m-b" style="margin-top: 20px" back-button>
                <strong>Back</strong>
            </a>
        </div>
    </div>
    <div class="row" ng-controller="index.v5ChallengeForums" ng-show="authorized()">
        <div class="col-md-10 col-md-offset-1" ng-include src="'/components/alert/alert.html'"></div>
        <div ng-show="!hasForum" class="col-md-12">
            <h2 style="text-align: center;">No forum avaiable</h2>
        </div>

        <div class="col-lg-12" ng-repeat="forum in forums">
            <div class="ibox-title">
                <div class="row">
                    <div class="col-md-8">
                        <h2>{{forum.name}}</h2>
                        <span class="badge badge-primary" ng-show="forum.archived">Archived</span>
                    </div>
                    <div class="col-md-4 m-t-md">
                        <button ng-click="getMembers($index)" ng-disabled="isLoading" type="button"
                            class="btn btn-sm btn-warning pull-right m-t-n-xs m-l-xs">
                            <strong>Show members</strong>
                        </button>
                        <button ng-click="openAddMemberDialog($index)" ng-show="!forum.archived" type="button"
                            class="btn btn-sm btn-success pull-right m-t-n-xs m-l-xs">
                            <strong>Add members</strong>
                        </button>
                        <button ng-show="!forum.archived" ng-click="archiveForum($index)" type="button"
                            class="btn btn-sm btn-default pull-right m-t-n-xs">
                            <strong>Archive</strong>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-12" ng-show="showUsers()">
            <div class="ibox-title">
                <div class="row">
                    <div class="col-md-12">
                        <h4 style="text-align: center;">Members of <b>{{currentForum.name}}</b></h4>
                    </div>
                </div>
            </div>
            <div class="ibox-content">
                <div class="text-center" ng-show="isLoading">
                    <img src="assets/images/loading.gif" />
                </div>
                <div ng-show="!hasMember">
                    <p style="text-align: center;">No member avaiable</p>
                </div>
                <div ng-show="!isLoading && hasMember" class="table-responsive">
                    <table class="footable table table-stripped toggle-arrow-tiny" data-page-size="50">
                        <thead>
                            <tr>
                                <th data-toggle="true" data-type="numeric" class="col-md-4">User ID</th>
                                <th class="col-md-4">Handle</th>
                                <th class="col-md-4" data-sort-ignore="true">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="animate-repeat" ng-repeat="member in users">
                                <td>{{member.userID}}</td>
                                <td>{{member.name}}</td>
                                <td>
                                    <a class="btn btn-sm btn-primary" ng-click="openEditMemberDialog($index)">
                                        Edit Member
                                    </a>
                                    <a class="btn btn-sm btn-danger" ng-show="!currentForum.archived"
                                        ng-click="removeMember($index)">
                                        Remove Member
                                    </a>
                                    <a class="btn btn-sm btn-warning" ng-click="openManageRoleDialog($index)">
                                        Manage Roles
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>